{% extends 'nucleo.html' %}
{% load staticfiles %}

{% block content %}
<div class="col-md-12">
                            <div class="card">
                                <div type="button" class="card-header card-header-icon" data-toggle="modal" data-target="#myModal" data-background-color="red">
                                    <img  style="width:150px;height:60px;" src="/static/assets10/img/logo5.png" alt="home" class="light-logo">
                                </div>
                                <div class="card-content">
                                    <h3 class="card-title"> Reporte de Gastos</h3>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead >
                                                <tr>
                                                    <th class="text-center">#</th>
                                                    <th>TIPO</th>
                                                    <th>RNC</th>
                                                    <th>FECHA</th>
                                                    <th class="text-center">NCF</th>
                                                    <th class="text-right">ITBIS</th>
                                                    <th class="text-right">SUBTOTAL</th>
                                                    <th class="text-right">TOTAL</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                               
                                              {% for gasto in gastos %}  
                                                <tr>
                                                    
                                                    <td>{{gasto.id}}</td>
                                                    <td>{{gasto.tipo}}</td>
                                                    <td>{{gasto.rnc}}</td>
                                                    <td >{{gasto.fecha}}</td>
                                                    <td class="text-right">{{gasto.ncf}}</td>
                                                    <td class="text-right">{{gasto.itbis}}</td>
                                                    <td class="text-right">{{gasto.subtotal}}</td>
                                                    <td class="text-right">{{gasto.total}}</td>
                                                </tr>
                                               {% endfor %}
                                               
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div style="text-align: center"><h4 class="modal-title">Nuevo Gasto</h4></div>
      </div>
      <div class="modal-body">
      <div style="text-align: center"> <p>Datos Necesarios para un nuevo Gasto</p></div>

      <input type="text" id="referencia" name="titulo" class="form-control" placeholder="Ingrese la Referencia">
      <select id="moneda" name="area" class="form-control">
      	<option value="DOP">DOP</option>
        <option value="USD">USD</option>
        <option value="MXN">MXN</option>
        <option value="COP">COP</option>
        <option value="EUR">EUR</option>
        <option value="VEF">VEF</option>
      </select>

      </div>
      <div class="modal-footer">
      	<button type="button" class="btn btn-danger" onclick="Crear();">Crear Gasto</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
 <script type="text/javascript">
                        	 function Crear() {
                                                         
                                           console.log("Entro al crear");
                                           var referencia = document.getElementById("referencia").value;
                                           var moneda = document.getElementById("moneda").value;
                                           $.ajax({
                                                            data: { csrfmiddlewaretoken: '{{ csrf_token }}','moneda':moneda, 'referencia':referencia},
                                                            url: '{% url 'creargastobase'  %}',
                                                            type: 'POST',
                                                            success : function(data) {
                                                                   window.location.reload();
                                                                               },
                                                            error : function(message) {
                                                                   console.log(message);
                                                            }
                                                             });

                                                        
                                                         }


                          function Remove(id) {
                                                       
                                         console.log(id);


                                         $.ajax({
                                                          data: { csrfmiddlewaretoken: '{{ csrf_token }}','id':id},
                                                          url: '{% url 'removergasto'  %}',
                                                          type: 'POST',
                                                          success : function(data) {
                                                                 window.location.reload();
                                                                             },
                                                          error : function(message) {
                                                                 console.log(message);
                                                          }
                                                           });

                                                      
                                                       }                               
                        </script>



                        
{% endblock %}